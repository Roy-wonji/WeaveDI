{"metadata":{"title":"DiContainer 2.0.0 ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ","role":"article","roleHeading":"Article","modules":[{"name":"DiContainer"}]},"identifier":{"url":"doc:\/\/DiContainer\/documentation\/DiContainer\/MIGRATION-2.0.0","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/DiContainer\/documentation\/DiContainer"]]},"abstract":[{"text":"DiContainer 1.xì—ì„œ 2.0.0ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ëŠ” ì™„ì „í•œ ê°€ì´ë“œ","type":"text"}],"primaryContentSections":[{"content":[{"type":"heading","anchor":"%EA%B0%9C%EC%9A%94","level":2,"text":"ê°œìš”"},{"type":"paragraph","inlineContent":[{"type":"text","text":"DiContainer 2.0.0ì€ Swift Concurrencyë¥¼ ì™„ì „íˆ ìˆ˜ìš©í•˜ê³ , Actor Hop ìµœì í™”ë¥¼ ë„ì…í•œ ë©”ì´ì € ì—…ë°ì´íŠ¸ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” ê¸°ì¡´ 1.x ì½”ë“œë¥¼ ìƒˆ ë²„ì „ìœ¼ë¡œ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤."}]},{"type":"heading","anchor":"%ED%95%9C%EB%88%88%EC%97%90-%EB%B3%B4%EB%8A%94-%EC%A3%BC%EC%9A%94-%EB%B3%80%ED%99%94","level":2,"text":"í•œëˆˆì— ë³´ëŠ” ì£¼ìš” ë³€í™”"},{"type":"heading","anchor":"%E2%9C%85-%EC%83%88%EB%A1%9C%EC%9A%B4-%EA%B8%B0%EB%8A%A5","level":3,"text":"âœ… ìƒˆë¡œìš´ ê¸°ëŠ¥"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"í†µí•© DI API","type":"text"}]},{"text":": ","type":"text"},{"type":"codeVoice","code":"UnifiedDI"},{"text":", ","type":"text"},{"code":"DI","type":"codeVoice"},{"type":"text","text":", "},{"code":"DIAsync","type":"codeVoice"},{"text":" 3ê°€ì§€ ë ˆë²¨ì˜ API ì œê³µ","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"ë¶€íŠ¸ìŠ¤íŠ¸ë© ì‹œìŠ¤í…œ"}]},{"type":"text","text":": ì•ˆì „í•œ ì•± ì´ˆê¸°í™”ë¥¼ ìœ„í•œ "},{"type":"codeVoice","code":"DependencyContainer.bootstrap"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Actor Hop ìµœì í™”","type":"text"}]},{"type":"text","text":": Swift Concurrencyì™€ ì™„ë²½ í˜¸í™˜ë˜ëŠ” ì„±ëŠ¥ ìµœì í™”"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"ê°•í™”ëœ Property Wrapper","type":"text"}]},{"type":"text","text":": "},{"type":"codeVoice","code":"@Inject"},{"type":"text","text":", "},{"type":"codeVoice","code":"@RequiredInject"},{"type":"text","text":", "},{"code":"@Factory","type":"codeVoice"},{"text":" ì§€ì›","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"AppDIContainer"}]},{"text":": ì•± ìˆ˜ì¤€ì˜ ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ ìœ„í•œ í†µí•© ì»¨í…Œì´ë„ˆ","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"ModuleFactory ì‹œìŠ¤í…œ","type":"text"}]},{"type":"text","text":": Repository, UseCase, Scope íŒ©í† ë¦¬ íŒ¨í„´"}]}]}]},{"type":"heading","text":"ğŸ”„ ë³€ê²½ëœ API","anchor":"%F0%9F%94%84-%EB%B3%80%EA%B2%BD%EB%90%9C-API","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"DependencyContainer.live.register"},{"type":"text","text":" â†’ "},{"type":"codeVoice","code":"UnifiedDI.register"},{"type":"text","text":" ë˜ëŠ” "},{"code":"DI.register","type":"codeVoice"}]}]},{"content":[{"inlineContent":[{"code":"RegisterAndReturn.register","type":"codeVoice"},{"text":" â†’ ","type":"text"},{"type":"codeVoice","code":"UnifiedDI.register"},{"type":"text","text":" ë˜ëŠ” KeyPath ê¸°ë°˜ ë“±ë¡"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Property Wrapper í†µí•©: ","type":"text"},{"code":"@Inject","type":"codeVoice"},{"text":" í•˜ë‚˜ë¡œ ì˜µì…”ë„\/í•„ìˆ˜ ëª¨ë‘ ì§€ì›","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"ë¶€íŠ¸ìŠ¤íŠ¸ë© ì‹œìŠ¤í…œ: ì•± ì‹œì‘ ì‹œ ë°˜ë“œì‹œ "},{"code":"bootstrap","type":"codeVoice"},{"text":" í˜¸ì¶œ í•„ìš”","type":"text"}],"type":"paragraph"}]}]},{"anchor":"%EB%B9%A0%EB%A5%B8-%EC%B9%98%ED%8A%B8%EC%8B%9C%ED%8A%B8%EC%9D%B4%EC%A0%84-%E2%86%92-%EC%9D%B4%ED%9B%84","type":"heading","level":2,"text":"ë¹ ë¥¸ ì¹˜íŠ¸ì‹œíŠ¸(ì´ì „ â†’ ì´í›„)"},{"type":"table","header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"1.x(ì´ì „)"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"2.0.0(ì´í›„)"}]}]],[[{"inlineContent":[{"type":"codeVoice","code":"DependencyContainer.live.register(T.self) { ... }"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"DI.register(T.self) { ... }"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"DependencyContainer.live.resolve(T.self)"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"code":"DI.resolve(T.self)","type":"codeVoice"},{"type":"text","text":" ë˜ëŠ” "},{"code":"await DIAsync.resolve(T.self)","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"RegisterAndReturn.register(\\.key) { ... }","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"DI.register(\\.key) { ... }"},{"text":" ë˜ëŠ” ","type":"text"},{"code":"await DIAsync.register(\\.key) { ... }","type":"codeVoice"}]}]],[[{"inlineContent":[{"type":"text","text":"ì§ì ‘ ì¸ìŠ¤í„´ìŠ¤ ìºì‹œ ê´€ë¦¬"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"DI.register(T.self) { ... }"},{"type":"text","text":" ì‚¬ìš©"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"GCD ê¸°ë°˜ ì¼ê´„ ë“±ë¡"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"await DIAsync.registerMany { ... }"},{"text":" (TaskGroup ë³‘ë ¬)","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"ë³µí•© ë½ + ì„ì‹œ ë¶€íŠ¸ìŠ¤íŠ¸ë©"}],"type":"paragraph"}],[{"inlineContent":[{"code":"DependencyContainer.bootstrap(â€¦)","type":"codeVoice"},{"type":"text","text":"ìœ¼ë¡œ ë‹¨ì¼ ê²½ë¡œ ê³ ì •"}],"type":"paragraph"}]]]},{"type":"heading","anchor":"%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9bootstrap-%EC%99%9C-%ED%95%84%EC%9A%94%ED%95%9C%EA%B0%80-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%93%B0%EB%8A%94%EA%B0%80","level":2,"text":"ë¶€íŠ¸ìŠ¤íŠ¸ë©(bootstrap) ì™œ í•„ìš”í•œê°€, ì–´ë–»ê²Œ ì“°ëŠ”ê°€"},{"type":"paragraph","inlineContent":[{"type":"text","text":"ì•±ì´ ì˜ì¡´ì„±ì„ ì‚¬ìš©í•˜ê¸° ì „, ì•ˆì „í•˜ê²Œ í•œ ë²ˆì— ì´ˆê¸°í™”í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œëŠ” actorë¥¼ í†µí•´ ì´ˆê¸°í™” ê²½í•©ì„ ì§ë ¬í™”í•˜ê³ , live ì»¨í…Œì´ë„ˆ êµì²´ë¥¼ ì›ìì ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤."}]},{"type":"codeListing","code":["\/\/ ë™ê¸° ì´ˆê¸° ë“±ë¡","await DependencyContainer.bootstrap { c in","  c.register(Logger.self) { ConsoleLogger() }","  c.register(Config.self) { AppConfig() }","}","","\/\/ ë¹„ë™ê¸° ì´ˆê¸° ë“±ë¡(ì˜ˆ: DB ì˜¤í”ˆ, ì›ê²© ì„¤ì • ë¡œë“œ)","await DependencyContainer.bootstrapAsync { c in","  let db = await Database.open()","  c.register(Database.self, instance: db)","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"ë¶€íŠ¸ìŠ¤íŠ¸ë© ì „ì— "},{"type":"codeVoice","code":"resolve"},{"text":"\/","type":"text"},{"code":"@Inject","type":"codeVoice"},{"text":"ê°€ í˜¸ì¶œë˜ë©´ í¬ë˜ì‹œ ë˜ëŠ” ì‹¤íŒ¨ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•± ì‹œì‘ ì§„ì…ì ì—ì„œ ë°˜ë“œì‹œ ë¶€íŠ¸ìŠ¤íŠ¸ë©ì„ í˜¸ì¶œí•˜ì„¸ìš”.","type":"text"}]},{"anchor":"KeyPath-%EA%B8%B0%EB%B0%98-%EB%93%B1%EB%A1%9D%ED%95%B4%EA%B2%B0","type":"heading","level":2,"text":"KeyPath ê¸°ë°˜ ë“±ë¡\/í•´ê²°"},{"type":"paragraph","inlineContent":[{"type":"text","text":"ê°€ë…ì„±ê³¼ íƒ€ì… ì•ˆì „ì„±ì„ ë™ì‹œì— ì œê³µí•©ë‹ˆë‹¤."}]},{"type":"codeListing","code":["extension DependencyContainer {","  var bookListInterface: BookListInterface? { resolve(BookListInterface.self) }","}","","\/\/ ë™ê¸°: ìƒì„±ê³¼ ë™ì‹œì— ë“±ë¡í•˜ê³  ë°˜í™˜","let repo = DI.register(\\.bookListInterface) { BookListRepositoryImpl() }","","\/\/ ë¹„ë™ê¸°: ìƒì„±ê³¼ ë™ì‹œì— ë“±ë¡í•˜ê³  ë°˜í™˜","let repo2 = await DIAsync.register(\\.bookListInterface) { await BookListRepositoryImpl.make() }","","\/\/ ì´ë¯¸ ìˆìœ¼ë©´ ì¬ìƒì„±í•˜ì§€ ì•ŠìŒ(idempotent)","let repo3 = await DIAsync.getOrCreate(\\.bookListInterface) { await BookListRepositoryImpl.make() }"],"syntax":"swift"},{"anchor":"%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0-%EB%9E%98%ED%8D%BC-%EB%B3%80%ED%99%94","type":"heading","level":2,"text":"í”„ë¡œí¼í‹° ë˜í¼ ë³€í™”"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"@Inject(\\.keyPath)"},{"type":"text","text":" í•˜ë‚˜ë¡œ ì˜µì…”ë„\/í•„ìˆ˜ ëª¨ë‘ ì§€ì›ë©ë‹ˆë‹¤."}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"ë³€ìˆ˜ íƒ€ì…ì´ Optionalì´ë©´ ë¯¸ë“±ë¡ ì‹œ "},{"type":"codeVoice","code":"nil"},{"type":"text","text":" ë°˜í™˜"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"ë³€ìˆ˜ íƒ€ì…ì´ Non-Optionalì´ë©´ ë¯¸ë“±ë¡ ì‹œ ëª…í™•í•œ ë©”ì‹œì§€ë¡œ "},{"code":"fatalError","type":"codeVoice"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"ë” ì—„ê²©í•œ í•„ìˆ˜ ì˜ì¡´ì„±ì—ëŠ” ","type":"text"},{"type":"codeVoice","code":"@RequiredDependency(\\.keyPath)"},{"type":"text","text":"ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”."}]}]}]},{"type":"paragraph","inlineContent":[{"text":"ê¸°ì¡´ ","type":"text"},{"code":"@ContainerRegister","type":"codeVoice"},{"text":" ê°™ì€ ë˜í¼ë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´ ","type":"text"},{"code":"@Inject","type":"codeVoice"},{"text":" ë˜ëŠ” ","type":"text"},{"code":"@RequiredDependency","type":"codeVoice"},{"type":"text","text":"ë¡œ êµì²´í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤."}]},{"level":2,"anchor":"Module-%EA%B3%BC-Container","text":"Module ê³¼ Container","type":"heading"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"Module","type":"codeVoice"},{"text":"ì€ ë” ê°€ë²¼ìš´ êµ¬ì¡°ë¡œ, ë‚´ë¶€ ë“±ë¡ í´ë¡œì €ëŠ” ","type":"text"},{"code":"@Sendable","type":"codeVoice"},{"text":"ë¡œ ì •ì˜ë©ë‹ˆë‹¤.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Container"},{"type":"text","text":"ëŠ” ë‹¤ìŒ ë¹Œë“œ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"await build()","type":"codeVoice"},{"text":" â€” ë¹„-throwing ê¸°ë³¸ ë¹Œë“œ","type":"text"}]}]},{"content":[{"inlineContent":[{"code":"await buildWithMetrics()","type":"codeVoice"},{"text":" â€” ìˆ˜í–‰ ì‹œê°„\/ì²˜ë¦¬ëŸ‰ ë©”íŠ¸ë¦­ ìˆ˜ì§‘","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"await buildWithResults()"},{"text":" â€” ì„±ê³µ\/ì‹¤íŒ¨ ìƒì„¸ ë¦¬í¬íŠ¸","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"try await buildThrowing()"},{"text":" â€” throwing ë“±ë¡ì„ ìœ„í•œ í™•ì¥ í¬ì¸íŠ¸","type":"text"}]}]}]}]}]},{"level":2,"anchor":"DI-vs-DIAsync-%EC%96%B8%EC%A0%9C-%EB%AC%B4%EC%97%87%EC%9D%84-%EC%93%B0%EB%82%98","text":"DI vs DIAsync â€” ì–¸ì œ ë¬´ì—‡ì„ ì“°ë‚˜","type":"heading"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"ë™ê¸° íŒ©í† ë¦¬ë¼ë©´ "},{"type":"codeVoice","code":"DI"},{"text":"ë¥¼, ë¹„ë™ê¸° íŒ©í† ë¦¬\/ë³‘ë ¬ ì¼ê´„ ë“±ë¡ì´ í•„ìš”í•˜ë©´ ","type":"text"},{"code":"DIAsync","type":"codeVoice"},{"text":"ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.","type":"text"}]}]}]},{"code":["\/\/ DI (sync)","DI.register(Service.self) { ServiceImpl() }","let s = DI.resolve(Service.self)","","\/\/ DIAsync (async)","await DIAsync.register(Service.self) { await ServiceImpl.make() }","let s2 = await DIAsync.resolve(Service.self)","","\/\/ ë“±ë¡ ì—¬ë¶€ í™•ì¸","let ok = DI.isRegistered(Service.self)","let ok2 = await DIAsync.isRegistered(Service.self)"],"type":"codeListing","syntax":"swift"},{"level":2,"anchor":"UnifiedDI%EB%A1%9C-%EB%8B%A8%EC%9D%BC-%EC%A7%84%EC%9E%85%EC%A0%90-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0","text":"UnifiedDIë¡œ ë‹¨ì¼ ì§„ì…ì  ì‚¬ìš©í•˜ê¸°","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"íŒ€ì´ "},{"code":"DI","type":"codeVoice"},{"type":"text","text":"\/"},{"type":"codeVoice","code":"DIAsync"},{"type":"text","text":" ëŒ€ì‹  í•˜ë‚˜ì˜ APIë¡œ í†µì¼í•˜ê³  ì‹¶ë‹¤ë©´ "},{"type":"codeVoice","code":"UnifiedDI"},{"type":"text","text":"ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œëŠ” "},{"type":"codeVoice","code":"DependencyContainer.live"},{"type":"text","text":"ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… ì•ˆì „í•œ ë“±ë¡\/í•´ê²°ì„ ì œê³µí•©ë‹ˆë‹¤."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"ì¹˜íŠ¸ì‹œíŠ¸(ì´ì „ â†’ UnifiedDI)"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"DI.register(T.self) { ... }","type":"codeVoice"},{"type":"text","text":" â†’ "},{"type":"codeVoice","code":"UnifiedDI.register(T.self) { ... }"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"DI.resolve(T.self)","type":"codeVoice"},{"type":"text","text":" â†’ "},{"type":"codeVoice","code":"UnifiedDI.resolve(T.self)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"DI.requireResolve(T.self)","type":"codeVoice"},{"text":" â†’ ","type":"text"},{"code":"UnifiedDI.requireResolve(T.self)","type":"codeVoice"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"DI.resolve(T.self, default: â€¦)"},{"type":"text","text":" â†’ "},{"type":"codeVoice","code":"UnifiedDI.resolve(T.self, default: â€¦)"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"DI.registerMany { â€¦ }"},{"text":" â†’ ","type":"text"},{"type":"codeVoice","code":"UnifiedDI.registerMany { â€¦ }"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"DIAsync.registerMany { â€¦ }","type":"codeVoice"},{"text":" â†’ ë¹„ë™ê¸° ì´ˆê¸°í™”ê°€ í•„ìš”í•˜ë©´ ","type":"text"},{"code":"DependencyContainer.bootstrapAsync","type":"codeVoice"},{"text":" ì•ˆì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“  ë’¤ ","type":"text"},{"type":"codeVoice","code":"container.register(_:instance:)"},{"type":"text","text":"ë¡œ ë“±ë¡í•˜ê±°ë‚˜, ìƒì„± ì´í›„ "},{"code":"UnifiedDI.register","type":"codeVoice"},{"type":"text","text":"\/"},{"code":"DependencyContainer.live.register","type":"codeVoice"},{"type":"text","text":"ë¡œ ë“±ë¡í•˜ì„¸ìš”."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"ì˜ˆì‹œ"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ ë“±ë¡","UnifiedDI.register(ServiceProtocol.self) { ServiceImpl() }","","\/\/ KeyPath ë“±ë¡","let repo = UnifiedDI.register(\\.userRepository) { UserRepositoryImpl() }","","\/\/ í•´ê²°","let s1 = UnifiedDI.resolve(ServiceProtocol.self)","let s2 = UnifiedDI.requireResolve(ServiceProtocol.self)","let logger = UnifiedDI.resolve(LoggerProtocol.self, default: ConsoleLogger())","","\/\/ ë°°ì¹˜ ë“±ë¡","UnifiedDI.registerMany {","  UnifiedRegistration(NetworkService.self) { DefaultNetworkService() }","  UnifiedRegistration(UserRepository.self) { UserRepositoryImpl() }","}"]},{"type":"heading","anchor":"%EB%8F%99%EC%8B%9C%EC%84%B1-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%ADSwift-6","level":2,"text":"ë™ì‹œì„± ì£¼ì˜ì‚¬í•­(Swift 6)"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"@Sendable"},{"type":"text","text":" í´ë¡œì € ì•ˆì—ì„œ non-Sendable ìƒíƒœë¥¼ ìº¡ì²˜í•˜ì§€ ë§ˆì„¸ìš”. í•„ìš” ì‹œ ê°’ ìŠ¤ëƒ…ìƒ·\/"},{"type":"codeVoice","code":"Sendable"},{"text":" ì±„íƒì„ ê³ ë ¤í•˜ì„¸ìš”.","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Container.build"},{"text":"ëŠ” ì‘ì—… ìƒì„± ì „ì— ìŠ¤ëƒ…ìƒ·ì„ ë§Œë“¤ì–´ actor hop ë¹„ìš©ì„ ì¤„ì…ë‹ˆë‹¤.","type":"text"}]}]}]},{"type":"heading","text":"ì£¼ìš” ë³€ê²½ì (ë¸Œë ˆì´í‚¹)ê³¼ ëŒ€ì²´ ë°©ë²•","anchor":"%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90%EB%B8%8C%EB%A0%88%EC%9D%B4%ED%82%B9%EA%B3%BC-%EB%8C%80%EC%B2%B4-%EB%B0%A9%EB%B2%95","level":2},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"ìˆ˜ë™ ë“±ë¡\/í•´ê²° ì§„ì…ì  ë³€ê²½"}],"type":"paragraph"}]}]},{"syntax":"swift","code":["\/\/ ì´ì „(1.x)","DependencyContainer.live.register(ServiceProtocol.self) { Service() }","let s = DependencyContainer.live.resolve(ServiceProtocol.self)","","\/\/ ì´í›„(2.0.0)","DI.register(ServiceProtocol.self) { Service() }","let s = DI.resolve(ServiceProtocol.self)"],"type":"codeListing"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"KeyPath ê¸°ë°˜ ë“±ë¡ ë°©ì‹ ì •ë¦¬"}]}]}],"start":2,"type":"orderedList"},{"syntax":"swift","code":["\/\/ ì´ì „(1.x)","RegisterAndReturn.register(\\.userRepository) { UserRepository() }","","\/\/ ì´í›„(2.0.0)","DI.register(\\.userRepository) { UserRepository() }","\/\/ ë˜ëŠ” ë¹„ë™ê¸° ì´ˆê¸°í™” í•„ìš” ì‹œ","await DIAsync.register(\\.userRepository) { await UserRepository.make() }"],"type":"codeListing"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"í”„ë¡œí¼í‹° ë˜í¼ ë§ˆì´ê·¸ë ˆì´ì…˜"}]}]}],"start":3},{"type":"codeListing","syntax":"swift","code":["\/\/ ì´ì „(ì˜ˆ: @ContainerRegister ì‚¬ìš©)","final class UserService {","  @ContainerRegister(\\.userRepository)","  private var repo: UserRepositoryProtocol","}","","\/\/ ì´í›„(2.0.0)","final class UserService {","  \/\/ Non-Optional: ë¯¸ë“±ë¡ ì‹œ ëª…í™•í•œ í¬ë˜ì‹œë¡œ ë¹ ë¥´ê²Œ ë°œê²¬","  @Inject(\\.userRepository) var repo: UserRepositoryProtocol","  ","  \/\/ Optionalë¡œ ì„ ì–¸í•˜ë©´ ë¯¸ë“±ë¡ ì‹œ nil ë°˜í™˜(ì„ íƒì  ì˜ì¡´ì„±ì— ì í•©)","  \/\/ @Inject(\\.userRepository) var repo: UserRepositoryProtocol?","}","","\/\/ ë” ì—„ê²©í•œ í•„ìˆ˜ ì˜ì¡´ì„±","final class AuthService {","  @RequiredDependency(\\.authRepository) var authRepo: AuthRepositoryProtocol","}"]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"ì¼ê´„ ë“±ë¡(ë°°ì¹˜) â€” GCD â†’ Concurrency"}]}]}],"start":4},{"type":"codeListing","syntax":"swift","code":["await DIAsync.registerMany {","  DIAsyncRegistration(ServiceA.self) { await ServiceA.make() }","  DIAsyncRegistration(ServiceB.self) { ServiceB() }","  DIAsyncRegistration(\\.userRepository) { await UserRepository.make() }","}"]},{"type":"heading","anchor":"%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%EB%8B%A8%EA%B3%84%EB%B3%84-%EA%B0%80%EC%9D%B4%EB%93%9C","level":2,"text":"ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„ë³„ ê°€ì´ë“œ"},{"type":"heading","anchor":"1%EB%8B%A8%EA%B3%84-API-%EC%84%A0%ED%83%9D-%EB%B0%8F-%ED%86%B5%EC%9D%BC","level":3,"text":"1ë‹¨ê³„: API ì„ íƒ ë° í†µì¼"},{"type":"paragraph","inlineContent":[{"text":"íŒ€ì˜ ì„ í˜¸ì— ë”°ë¼ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:","type":"text"}]},{"type":"heading","anchor":"%EC%98%B5%EC%85%98-A-UnifiedDI-%EC%B5%9C%EC%8B%A0-%EB%B0%8F-%EC%B6%94%EC%B2%9C","level":4,"text":"ì˜µì…˜ A: UnifiedDI (ìµœì‹  ë° ì¶”ì²œ)"},{"type":"codeListing","syntax":"swift","code":["\/\/ ëª¨ë“  ì˜ì¡´ì„± ì‘ì—…ì„ UnifiedDIë¡œ í†µì¼","UnifiedDI.register(ServiceProtocol.self) { ServiceImpl() }","let service = UnifiedDI.resolve(ServiceProtocol.self)"]},{"type":"heading","anchor":"%EC%98%B5%EC%85%98-B-DIDIAsync-%EB%B6%84%EB%A6%AC-%EC%82%AC%EC%9A%A9","level":4,"text":"ì˜µì…˜ B: DI\/DIAsync ë¶„ë¦¬ ì‚¬ìš©"},{"type":"codeListing","syntax":"swift","code":["\/\/ ë™ê¸° ì‘ì—…ì€ DI","DI.register(ServiceProtocol.self) { ServiceImpl() }","","\/\/ ë¹„ë™ê¸° ì‘ì—…ì€ DIAsync","await DIAsync.register(ServiceProtocol.self) { await ServiceImpl.make() }"]},{"type":"heading","anchor":"2%EB%8B%A8%EA%B3%84-%EB%93%B1%EB%A1%9D-%EB%B0%A9%EC%8B%9D-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8","level":3,"text":"2ë‹¨ê³„: ë“±ë¡ ë°©ì‹ ì—…ë°ì´íŠ¸"},{"type":"codeListing","syntax":"swift","code":["\/\/ ì´ì „","DependencyContainer.live.register(ServiceProtocol.self) { ServiceImpl() }","RegisterAndReturn.register(\\.userRepository) { UserRepository() }","","\/\/ ì´í›„","UnifiedDI.register(ServiceProtocol.self) { ServiceImpl() }","UnifiedDI.register(\\.userRepository) { UserRepository() }"]},{"level":3,"text":"3ë‹¨ê³„: ë¶€íŠ¸ìŠ¤íŠ¸ë© ì‹œìŠ¤í…œ ë„ì…","anchor":"3%EB%8B%A8%EA%B3%84-%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%8F%84%EC%9E%85","type":"heading"},{"syntax":"swift","code":["\/\/ ì•± ì‹œì‘ì ì—ì„œ ë°˜ë“œì‹œ í˜¸ì¶œ","@main","struct MyApp: App {","    init() {","        Task {","            await DependencyContainer.bootstrap { container in","                \/\/ ëª¨ë“  ì˜ì¡´ì„± ë“±ë¡","                container.register(LoggerProtocol.self) { Logger() }","                container.register(NetworkProtocol.self) { NetworkService() }","            }","        }","    }","}"],"type":"codeListing"},{"level":3,"text":"4ë‹¨ê³„: Property Wrapper ì—…ë°ì´íŠ¸","anchor":"4%EB%8B%A8%EA%B3%84-Property-Wrapper-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8","type":"heading"},{"syntax":"swift","code":["\/\/ ì´ì „","@ContainerRegister(\\.userRepository) var repo: UserRepositoryProtocol","","\/\/ ì´í›„ - ì˜µì…˜ 1: ì˜µì…”ë„ ì£¼ì… (ì•ˆì „)","@Inject(\\.userRepository) var repo: UserRepositoryProtocol?","","\/\/ ì´í›„ - ì˜µì…˜ 2: í•„ìˆ˜ ì£¼ì… (ë¹ ë¥¸ ì‹¤íŒ¨ ë°œê²¬)","@RequiredInject(\\.userRepository) var repo: UserRepositoryProtocol"],"type":"codeListing"},{"level":3,"text":"5ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—…ë°ì´íŠ¸","anchor":"5%EB%8B%A8%EA%B3%84-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8","type":"heading"},{"syntax":"swift","code":["class MyTests: XCTestCase {","    override func setUp() async throws {","        await super.setUp()","","        \/\/ í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ ë¦¬ì…‹","        await DependencyContainer.resetForTesting()","","        \/\/ í…ŒìŠ¤íŠ¸ìš© ì˜ì¡´ì„± ë“±ë¡","        await DependencyContainer.bootstrap { container in","            container.register(ServiceProtocol.self) { MockService() }","        }","    }","","    override func tearDown() async throws {","        UnifiedDI.releaseAll()","        await super.tearDown()","    }","}"],"type":"codeListing"},{"level":3,"text":"6ë‹¨ê³„: ê³ ê¸‰ ê¸°ëŠ¥ í™œìš© (AppDIContainer)","anchor":"6%EB%8B%A8%EA%B3%84-%EA%B3%A0%EA%B8%89-%EA%B8%B0%EB%8A%A5-%ED%99%9C%EC%9A%A9-AppDIContainer","type":"heading"},{"inlineContent":[{"type":"text","text":"ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œëŠ” AppDIContainerë¥¼ í™œìš©í•˜ì„¸ìš”:"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ AppDIContainer í™œìš©","await AppDIContainer.shared.registerDefaultDependencies()","","\/\/ ë˜ëŠ” ì»¤ìŠ¤í…€ ë“±ë¡","await AppDIContainer.shared.registerDependencies { container in","    var repositoryFactory = AppDIContainer.shared.repositoryFactory","    repositoryFactory.registerDefaultDefinitions()","","    await repositoryFactory.makeAllModules().asyncForEach { module in","        await container.register(module)","    }","}"],"type":"codeListing"},{"level":2,"text":"AutoResolver ë©”ëª¨ì™€ ì˜µì…˜","anchor":"AutoResolver-%EB%A9%94%EB%AA%A8%EC%99%80-%EC%98%B5%EC%85%98","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"2.0.0ì—ì„œëŠ” AutoResolverê°€ ë©”ì¸ ì•¡í„°ì—ì„œ ë™ì‘í•˜ì—¬ UI\/ì£¼ì… ì•ˆì „ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"ìë™ í•´ì„ì„ ì „ì²´ ë„ê±°ë‚˜, íŠ¹ì • íƒ€ì…ë§Œ ì œì™¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}]}]}],"type":"unorderedList"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"2.1.0ë¶€í„° AutoDependencyResolverê°€ AutoDIOptimizerë¡œ êµì²´ë˜ì—ˆìŠµë‹ˆë‹¤:"}]}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ ìë™ ìµœì í™” ì œì–´ (ê¸°ë³¸ê°’: í™œì„±í™”)","UnifiedDI.setAutoOptimization(true)  \/\/ í™œì„±í™”","UnifiedDI.setAutoOptimization(false) \/\/ ë¹„í™œì„±í™”","","\/\/ ìë™ ìˆ˜ì§‘ëœ ì •ë³´ëŠ” LogMacroë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ì¶œë ¥ë©ë‹ˆë‹¤","\/\/ ë³„ë„ print í˜¸ì¶œ ë¶ˆí•„ìš” - ë“±ë¡\/í•´ê²° ì‹œ ìë™ ë¡œê¹…:","\/\/ ğŸ“Š Auto tracking registration: UserService","\/\/ âš¡ Auto optimized: UserService (10 uses)","\/\/ ğŸ“Š [AutoDI] Current stats: {\"UserService\": 15}"],"type":"codeListing"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"ìë™í™”ê°€ ë”ìš± ê°„í¸í•´ì¡ŒìŠµë‹ˆë‹¤. ë³„ë„ ì„¤ì • ì—†ì´ ë“±ë¡\/í•´ê²°ë§Œ í•˜ë©´ ëª¨ë“  ìµœì í™”ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.","type":"text"}]}]}],"type":"unorderedList"},{"level":2,"text":"TCA í†µí•© ì½”ë“œ ì˜ˆ(ì—…ë°ì´íŠ¸)","anchor":"TCA-%ED%86%B5%ED%95%A9-%EC%BD%94%EB%93%9C-%EC%98%88%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8","type":"heading"},{"type":"codeListing","syntax":"swift","code":["import ComposableArchitecture","import DiContainer","","extension UserUseCase: DependencyKey {","  public static var liveValue: UserUseCaseProtocol = {","    \/\/ ë“±ë¡ë˜ì–´ ìˆìœ¼ë©´ resolve, ì—†ìœ¼ë©´ ê¸°ë³¸ êµ¬í˜„ì„ ë“±ë¡í•˜ë©° ì‚¬ìš©","    let repository = ContainerRegister.register(\\.userRepository) { DefaultUserRepository() }","    return UserUseCase(repository: repository)","  }()","}","","extension DependencyValues {","  var userUseCase: UserUseCaseProtocol {","    get { self[UserUseCase.self] }","    set { self[UserUseCase.self] = newValue }","  }","}"]},{"type":"thematicBreak"},{"type":"paragraph","inlineContent":[{"type":"text","text":"íŠ¹ì • ì½”ë“œ ì¡°ê°ì˜ ë³€í™˜ì´ í•„ìš”í•˜ë‹¤ë©´, ìŠ¤ë‹ˆí«ì„ ê³µìœ í•´ ì£¼ì„¸ìš”. 2.0.0 ìŠ¤íƒ€ì¼ë¡œ ì •í™•íˆ ë°”ê¿”ë“œë¦½ë‹ˆë‹¤."}]}],"kind":"content"}],"variants":[{"paths":["\/documentation\/dicontainer\/migration-2.0.0"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","sections":[],"schemaVersion":{"minor":3,"major":0,"patch":0},"seeAlsoSections":[{"identifiers":["doc:\/\/DiContainer\/documentation\/DiContainer\/QuickStart","doc:\/\/DiContainer\/documentation\/DiContainer\/CoreAPIs","doc:\/\/DiContainer\/documentation\/DiContainer\/MIGRATION-3.0.0","doc:\/\/DiContainer\/documentation\/DiContainer\/AppDIIntegration","doc:\/\/DiContainer\/documentation\/DiContainer\/Bootstrap","doc:\/\/DiContainer\/documentation\/DiContainer\/DependencyContainer"],"anchor":"ì‹œì‘í•˜ê¸°","generated":true,"title":"ì‹œì‘í•˜ê¸°"}],"references":{"doc://DiContainer/documentation/DiContainer/CoreAPIs":{"url":"\/documentation\/dicontainer\/coreapis","role":"article","title":"ì½”ì–´ API ê°€ì´ë“œ","abstract":[],"kind":"article","type":"topic","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/CoreAPIs"},"doc://DiContainer/documentation/DiContainer/MIGRATION-3.0.0":{"identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/MIGRATION-3.0.0","type":"topic","kind":"article","title":"DiContainer 3.0.0 ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ","url":"\/documentation\/dicontainer\/migration-3.0.0","role":"article","abstract":[{"type":"text","text":"ì´ ë¬¸ì„œëŠ” 2.x.xì—ì„œ 3.0.0ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•  ë•Œ í•„ìš”í•œ ë³€ê²½ ì‚¬í•­ê³¼ ê¶Œì¥ ë§ˆì´ê·¸ë ˆì´ì…˜ ê²½ë¡œë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤."}]},"doc://DiContainer/documentation/DiContainer":{"url":"\/documentation\/dicontainer","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer","type":"topic","role":"collection","kind":"symbol","title":"DiContainer","abstract":[]},"doc://DiContainer/documentation/DiContainer/Bootstrap":{"url":"\/documentation\/dicontainer\/bootstrap","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/Bootstrap","type":"topic","role":"article","kind":"article","title":"ë¶€íŠ¸ìŠ¤íŠ¸ë© ê°€ì´ë“œ (Bootstrap)","abstract":[{"type":"text","text":"ì•± ì‹œì‘ ì‹œ ì˜ì¡´ì„±ì„ ì•ˆì „í•˜ê³  ì¼ê´€ë˜ê²Œ ì¤€ë¹„í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤. DiContainerëŠ” ë‹¤ì–‘í•œ ë¶€íŠ¸ìŠ¤íŠ¸ë© íŒ¨í„´ì„ ì œê³µí•˜ì—¬ ë™ê¸°\/ë¹„ë™ê¸° ì´ˆê¸°í™”, í…ŒìŠ¤íŠ¸ ê²©ë¦¬, ì¡°ê±´ë¶€ ì´ˆê¸°í™” ë“±ì„ ìœ ì—°í•˜ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}]},"doc://DiContainer/documentation/DiContainer/AppDIIntegration":{"identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/AppDIIntegration","type":"topic","kind":"article","title":"App DI Integration","url":"\/documentation\/dicontainer\/appdiintegration","role":"article","abstract":[{"type":"text","text":"ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì—ì„œ DIë¥¼ êµ¬ì„±í•˜ê³  ë¶€íŠ¸ìŠ¤íŠ¸ë©í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤."}]},"doc://DiContainer/documentation/DiContainer/DependencyContainer":{"navigatorTitle":[{"text":"DependencyContainer","kind":"identifier"}],"identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/DependencyContainer","kind":"symbol","title":"DependencyContainer","url":"\/documentation\/dicontainer\/dependencycontainer","abstract":[{"text":"ê¸°ì¡´ DependencyContainerì™€ì˜ í˜¸í™˜ì„±ì„ ìœ„í•œ ë³„ì¹­","type":"text"}],"fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DependencyContainer","kind":"identifier"}],"type":"topic","role":"symbol"},"doc://DiContainer/documentation/DiContainer/QuickStart":{"identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/QuickStart","type":"topic","kind":"article","title":"ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ","url":"\/documentation\/dicontainer\/quickstart","role":"article","abstract":[{"type":"text","text":"DiContainerë¥¼ 5ë¶„ë§Œì— ì‹œì‘í•´ë³´ì„¸ìš”!"}]}}}