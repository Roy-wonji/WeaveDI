# ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ (Benchmarks)

WeaveDIì˜ resolve ì„±ëŠ¥ì„ ë¹ ë¥´ê²Œ ì ê²€í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ ë²¤ì¹˜ë§ˆí¬ ê°€ì´ë“œì…ë‹ˆë‹¤. Benchmarks ì‹¤í–‰ íƒ€ê¹ƒì„ í†µí•´ p50/p95/p99 ë° ì´ ì†Œìš” ì‹œê°„ì„ í™•ì¸í•˜ê³ , ë””ë°”ìš´ìŠ¤ ê°„ê²©ì— ë”°ë¥¸ ìµœì ì ì„ íƒìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì‹¤í–‰ ë°©ë²•

- ë‹¨ì¼ ì¡°í•©(ê¶Œì¥):
```bash
swift run -c release Benchmarks -- --count 100000 --debounce 100
```
- ëª¨ë“  ì¡°í•©(ê¸°ë³¸):
```bash
swift run -c release Benchmarks
```
- ë¹ ë¥¸ ì¢…ë£Œ(ì²« ì¡°í•©ë§Œ):
```bash
swift run -c release Benchmarks -- --quick
```
- CSV ì €ì¥ ë° ì°¨íŠ¸(ì„ íƒ):
```bash
swift run -c release Benchmarks -- --count 100000 --debounce 100 --csv bench.csv
python3 Scripts/plot_bench.py --csv bench.csv --out bench_plot
```

## ìƒ˜í”Œ ê²°ê³¼

ì•„ë˜ëŠ” 10k/100k/1M Ã— 50/100/200ms ë””ë°”ìš´ìŠ¤ì—ì„œ ì¸¡ì •ëœ ìƒ˜í”Œ ì¶œë ¥ì…ë‹ˆë‹¤(í™˜ê²½ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤).

```
ğŸ“Š Bench: counts=[10000, 100000, 1000000], debounces=[50, 100, 200] (ms)
debounce= 50ms, n=    10000 | total=   23.30ms | p50= 0.002 p95= 0.003 p99= 0.005
debounce= 50ms, n=   100000 | total=  212.62ms | p50= 0.002 p95= 0.003 p99= 0.004
debounce= 50ms, n=  1000000 | total= 2057.00ms | p50= 0.020 p95= 0.024 p99= 0.032
debounce=100ms, n=    10000 | total=   20.86ms | p50= 0.002 p95= 0.003 p99= 0.005
debounce=100ms, n=   100000 | total=  206.62ms | p50= 0.002 p95= 0.003 p99= 0.004
debounce=100ms, n=  1000000 | total= 2058.37ms | p50= 0.020 p95= 0.024 p99= 0.034
debounce=200ms, n=    10000 | total=   20.68ms | p50= 0.002 p95= 0.003 p99= 0.004
debounce=200ms, n=   100000 | total=  208.51ms | p50= 0.002 p95= 0.003 p99= 0.004
debounce=200ms, n=  1000000 | total= 2234.77ms | p50= 0.020 p95= 0.025 p99= 0.060
```

## í•´ì„ ê°€ì´ë“œ

- 10k/100k: ì„¸ ë””ë°”ìš´ìŠ¤(50/100/200ms)ì—ì„œ ì´ ì†Œìš”/í¼ì„¼íƒ€ì¼ì— í° ì°¨ì´ê°€ ì—†ìŠµë‹ˆë‹¤.
- 1M: 200msì—ì„œ total/p99ê°€ ìƒëŒ€ì ìœ¼ë¡œ ë†’ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤(ì˜ˆ: p99=0.060ms). 50ms/100msê°€ ë” ì•ˆì •ì ì…ë‹ˆë‹¤.
- ê¶Œì¥: 50ms ë˜ëŠ” 100msë¶€í„° ì‹œì‘í•´ ì›Œí¬ë¡œë“œì— ë§ì¶° ì¡°ì •í•˜ì„¸ìš”.

## ì°¸ê³ 

- Benchmarks íƒ€ê¹ƒì€ ìŠ¤ëƒ…ìƒ· ë””ë°”ìš´ìŠ¤/í•«íŒ¨ìŠ¤ ë¹„ì°¨ë‹¨ ì„¤ê³„ì˜ íš¨ê³¼ë¥¼ ëŒ€ëµì ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ìš©ë„ì…ë‹ˆë‹¤. ì‹¤ì œ ì•±ì—ì„œëŠ” ì‚¬ìš© íŒ¨í„´/ë””ë°”ì´ìŠ¤/ë¹Œë“œì˜µì…˜ì— ë”°ë¼ ìˆ˜ì¹˜ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ CSVë¡œ ì—¬ëŸ¬ ì°¨ë¡€ ìˆ˜ì§‘í•˜ê³  í‰ê· /í‘œì¤€í¸ì°¨ë¥¼ í•¨ê»˜ ë³´ì„¸ìš”.
- ìŠ¤ëƒ…ìƒ· ë””ë°”ìš´ìŠ¤ëŠ” `UnifiedDI.configureOptimization(debounceMs:)`ë¡œ 50~1000ms ì‚¬ì´ì—ì„œ ì¡°ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.
